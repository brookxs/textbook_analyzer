 4.5 PAT Data Structure  Using n-grams with interword symbols included between valid processing tokens equates to a continuous text input data structure that is being indexed in Data Structure                                                                                            89  contiguous "n" character tokens. A different view of addressing a continuous text input data structure comes from PAT trees and PAT arrays. The input stream is transformed into a searchable data structure consisting of substrings. The original concepts of PAT tree data structures were described as Patricia trees (Flajolet-86, Frakes-92, Gonnet-83, Knuth-73, and Morrison-68) and have gained new momentum as a possible structure for searching text and images (Gonnet-88) and applications in genetic databases (Manber-90). The name PAT is short for PAtricia Trees (PATRICIA stands for Practical Algorithm To Retrieve Information Coded In Alphanumerics.)  In creation of PAT trees each position in the input string is the anchor point for a sub-string that starts at that point and includes all new text up to the end of the input. All substrings are unique. This view of text lends itself to many different search processing structures. It fits within the general architectures of hardware text search machines and parallel processors (see Chapter 9). A substring can start at any point in the text and can be uniquely indexed by its starting location and length. If all strings are to the end of the input, only the starting location is needed since the length is the difference from the location and the total length of the item. It is possible to have a substring go beyond the length of the input stream by adding additional null characters. These substrings are called sistring (semi-infinite string). Figure 4.9 shows some possible sistrings for an input text.  A PAT tree is an unbalanced, binary digital tree defined by the sistrings. The individual bits of the sistrings decide the branching patterns with zeros branching left and ones branching right. PAT trees also allow each node in the tree to specify which bit is used to determine the branching via bit position or the  Text                   Economics for Warsaw is complex.  sistring 1             Economics for Warsaw is complex,  sistring 2             conomics for Warsaw is complex,  sistring 5             omics for Warsaw is complex,  sistring 10            for Warsaw is complex.  sistring 20           w is complex.  sistring 30           ex.  Figure 4.9 Examples of sistrings  number of bits to skip from the parent node. This is useful in skipping over levels that do not require branching.  The key values are stored at the leaf nodes (bottom nodes) in the PAT Tree. For a text input of size fcV there are "n" leaf nodes and "n-F at most higher level nodes. It is possible to place additional constraints on sistrings for the leaf nodes.   We may be interested in limiting our searches to word boundaries. 90                                                                                                Chapter 4  Thus we could limit our sistrings to those that are immediately after an interword symbol. Figure 4,10 gives an example of the sistrings used in generating a PAT  INPUT                                                      100110001101  sistring 1             1001....  sistring2               001100...  sistring 3                01100....  sistring 4                  11.......  sistring 5                     1000...  sistring 6                      000.....  sistring 7                        001101  sistring 8                          01101  Figure 4.10 Sistrings for input "100110001101"  tree. If the binary representations of "h" is (100), "o" is (110), "m" is (001) and ue" is (101) then the word "home" produces the input 100110001101.... Using the sistrings, the frill PAT binary tree is shown in Figure 4.11. A more compact tree where skip values are in the intermediate nodes is shown in Figure 4.12. In this version the value in the intermediate nodes (indicated by rectangles) is the number of bits to skip until the next bit to compare that causes differences between similar terms. This final version saves space, but requires comparing a search value to the leaf node (in an oval) contents to ensure the skipped bits match the search term (i.e., skipped bits are not compared).  The search terms are also represented by their binary representation and the PAT trees for the sistrings are compared to the search terms looking for matches.  As noted in Chapter 2, one of the most common classes of searches is prefix searches. PAT trees are ideally constructed for this purpose because each sub-tree contains all the sistrings for the prefix defined up to that node in the tree structure. Thus all the leaf nodes after the prefix node define the sistrings that satisfy the prefix search criteria. This logically sorted order of PAT trees also facilitates range searches since it is easy to determine the sub-trees constrained by the range values. If the total input stream is used in defining the PAT tree, then suffix, imbedded string, and fixed length masked searches (see Section 2.1.5) are all easy because the given characters uniquely define the path from the root node to where the existence of sistrings need to be validated. Fuzzy searches are very difficult because large number of possible sub-trees could match the search term.  A detailed discussion on searching PAT trees and their representation as an array is provided by Gonnet, Baeza-Yates and Snider (Gonnet-92). In their comparison to Signature and Inversion files, they concluded that PAT arrays have more accuracy than Signature files and provide the ability to string searches that Data Structure  91  1000  1001  001100  001101  Figure 4.11  PAT Binary Tree for input "100110001101' 92  Chapter 4  Figure 4. 12   PAT Tree skipping bits for "100110001101"  are inefficient in inverted files (e.g., suffix searches, approximate string searches,  longest repetition).  Pat Trees (and arrays) provide an alternative structure if string searching  is the goal.    They store the text in an alternative structure supporting string  manipulation. The structure does not have facilities to store more abstract concepts and their relationships associated with an item. The structure has interesting potential applications, but is not used in any major commercial products at this time.  