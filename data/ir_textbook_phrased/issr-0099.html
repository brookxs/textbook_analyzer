7.2.1 similarity-measures a variety of different similarity-measures can be used to calculate the similarity between the item and the search statement . a characteristic of a similarity formula is that the results of the formula increase as the items become more similar . the value is zero if the items are totally dissimilar . an example of a simple `` sum of the products '' similarity-measure from the examples in chapter 6 to determine the similarity between documents for clustering purposes is : sim (itemi , itemj) = i (termigt ; k) (termjtk) this formula uses the summation of the product of the various terms of two items when treating the index as a vector . if itertij is replaced with queryj then the same formula generates the similarity between every item and query , . the problem with this simple measure is in the normalization needed to account for variances in the length of items . additional normalization is also used to have the final results come between zero and +1 (some formulas use the range ó1 to +1) . one of the originators of the theory behind statistical-indexing and similarity-functions was robertson and spark jones (robertson-76) . their model suggests that knowledge of terms in relevant items retrieved from a query should adjust the weights of those terms in the weighting process . they used the number of relevant documents versus the number of non-relevant documents in the database and the number of relevant documents having a specific query-term versus the number of non-relevant documents having that term to devise four formulas for weighting . this assumption of the availability of relevance information in the weighting process was later relaxed by croft and harper (croft-79) . croft expanded this original concept , taking into account the frequency of occurrence of terms within an item producing the following similarity formula (croft-83) : sim (doq , queryj = j (c + idf .) * / , j) where c is a constant used in tuning , idfj is the inverse-document-frequency for term `` i '' in the collection and / j = k + (k - l) tfl/maxfreqj user-search techniques 169 where k is a tuning constant , tfjtj is the frequency of term ! `` i '' item j and maxfrecjj is the maximum frequency of any term in item `` j. '' the best values for k seemed to range between 0.3 and 0.5 . another early similarity formula was used by salton in the smart system (saiton-83) . salton treated the index and the search-query as ndimensional vectors (see chapter 5) . to determine the `` weight '' an item has with respect to the search statement , the cosine formula is used to calculate the distance between the vector for the item and the vector for the query : (doc , , k * qtermj , k) sim (doci , queryj) = __________________________________ 1 k =\ k =\ where doqk is the kth term in the weighted vector for item `` i '' and qterm ^ is the kth term in query `` j. '' the cosine formula calculates the cosine of the angle between the two vectors . as the cosine approaches `` 1 , '' the two vectors become coincident (i.e. , the term and the query represent the same concept) . if the two are totally unrelated , then they will be orthogonal and the value of the cosine is `` 0 . '' what is not taken into account is the length of the vectors . for example , if the following vectors are in a three-dimensional (three term) system : item = (4 ,8,0) query 1 = (1 , 2,0) query 2 = (3 , 6,0) then the cosine value is identical for both queries even though query 2 has significantly higher weights in the terms in common . to improve the formula , salton and buckley (salton-88) changed the term factors in the query to : qtermljt = (0.5 + (0.5 tfi.k / maxfreqk)) * idfj where tfj?k is the frequency of term `` i '' in query `` k , '' maxfreqk is the maximum frequency of any term in query `` k * and idf ; is the inverse-document-frequency for term `` i '' (see chapter 5 for the formula) . in the most recent evolution of the formula , the idf factor has been dropped (buckley-96) . two other commonly used measures are the jaccard and the dice similarity-measures (rijsbergen-79) . both change the normalizing factor in the denominator to account for different characteristics of the data . the denominator in the cosine formula is invariant to the number of terms in common and produces very small numbers when the vectors are large and the number of common 170 chapter 7 elements is small . in the jaccard similarity-measure , the denominator becomes dependent upon the number of terms in common . as the common elements increase , the similarity value quickly decreases , but is always in the range -1 to +1 . the jaccard formula is : (doclik * qtermhk) k = l sim (doc , , queryj) = ------------------------------------------------- k =\ k =\ k =\ the dice measure simplifies the denominator from the jaccard measure and introduces a factor of 2 in the numerator . the normalization in the dice formula is also invariant to the number of terms in common . 2 * 2 . (doclik * qterm , k) k = l sim (doc , , queryj) = ______________________________ * = 1 * = i figure 7.2 shows how the normalizing denominator results vary with the commonality of terms . for the dice value , the numerator factor of 2 is divided into the denominator . notice that as long as the vector values are same , independent of their order , the cosine and dice normalization factors do not change . also notice that when there are a number of terms in common between the query and the document , that the jaccard formula can produce a negative normalization-factor . it might appear that similarity-measures only apply to statistical systems where the formulas directly apply to the stored indexes . in the implementation of natural-language-systems , also weighted values come from statistical-data in conjunction with the natural-language-processing stored as indexes . similarity algorithms are applied to these values in a similar fashion to statistical systems . but in addition to the similarity-measures , constructs are used at the discourse-level to perform additional filtering of the items . use of a similarity algorithm returns the complete data-base as search-results . many of the items have a similarity close or equal to zero (or minimum value the similarity-measure produces) . for this reason , thresholds are usually associated with the search-process . the threshold defines the items in the resultant hit file from the query . thresholds are either a value that the similarity-measure must equal or exceed or a number that limits the number of items in the hit file . a user-search techniques 171 query = (2 , 2 , 0 , 0 , 4) doc1 = (0,2,6,4,0) doc2 = (2 , 6 , 0 , 0 , 4) cosine jaccard dice doc1 36.66 16 20 doc2 36.66 -12 20 figure 7.2 normalizing factors for similarity-measures default is always the case where the similarity is greater than zero . figure 7.3 illustrates the threshold process . the simple `` sum of the products '' similarity formula is used to calculate similarity between the query and each document . if no threshold is specified , all three documents are considered hits . if a threshold of 4 is selected , then only doc1 is returned . vector : american , geography , lake , mexico , painter , oil , reserve , subject doc1 geography o/mexico suggests oil reserves are available vector (0 , 1,0,2,0,3 , 1,0) doc2 american geography has lakes available everywhere vector (1,3,2,0,0,0,0,0) doc3 painters suggest mexico lakes as subjects vector (0,0 , 1,3,3,0,0,2) query oil reserves in mexico vector (0 , 0 , 0 , 1,0 , 1 , 1,0) sim (q , doc !) = 6 , sim (q , doc2) = 0 , sim (q , doc3) = 3 figure 7.3 query threshold process 172 chapter 7 figure 7.4 item cluster hierarchy one special area of concern arises from search of clusters of terms that are stored in a hierarchical scheme (see chapter 6) . the items are stored in clusters that are represented by the centroid for each cluster . figure 7.4 shows a cluster-representation of an item space . in figure 7.4 , each letter at the leaf (bottom nodes) represent an item (i.e. , k , l , m , n , d , e , f , g , h , p , q , r , j) . the letters at the higher nodes (a , c , b , i) represent the centroid of their immediate children nodes . the hierarchy is used in search by performing a top-down process . the query is compared to the centroids `` a '' and `` b. '' if the results of the similarity-measure are above the threshold , the query is then applied to the nodes ' children . if not , then that part of the tree is pruned and not searched . this continues until the actual leaf nodes that are not pruned are compared . the problem comes from the nature of a centroid which is an average of a collection of items (in physics , the center of gravity) . the risk is that the average may not be similar enough to the query for continued search , but specific items used to calculate the centroid may be close enough to satisfy the search . the risks of missing items and thus reducing recall increases as the standard-deviation increases . use of centroids reduces the similarity computations but could cause a decrease in recall . it should have no effect on precision since that is based upon the similarity calculations at the leaf (item) level . in figure 7.5 the filled circle represents the query and the filled boxes represent the centroids for the three clusters represented by the ovals . in this case , the query may only be similar enough to the end two circles for additional analysis . but there are specific items in the right cluster that are much closer to the query than the cluster-centroid and could satisfy the query . these items can not be returned because when their centroid is eliminated they are no longer considered . as part of investigating improved techniques to present hits to users , hearst and pederscn from xerox palo alto research center (parc) are user-search techniques 173 v v v \ ax / vv vvv \ ï ! / vvv v \ i 1 / fvvk / \ vv vv vv v v vv v vv vvv / i vv v / \ vvv i figure 7.5 centroid comparisons pursuing topical clustering as an alternative to similarity-search ranking (hearst96) . in their experiments they applied the clustering to the entire corpora . although the clustering conveyed some of the content-and-structure of the corpora , it was shown to be less effective in retrieval than a standard similarity-query (pirolli-96) . constraining the search to the hierarchy retrieved fewer relevant items than a similarity-query that focused the results on an indexed logical subset of the corpus .