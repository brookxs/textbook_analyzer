<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<!--Converted with LaTeX2HTML 2002-2-1 (1.71)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<html>
 <head> 
  <title>Connectivity servers</title> 
  <meta name="description" content="Connectivity servers" /> 
  <meta name="keywords" content="irbook" /> 
  <meta name="resource-type" content="document" /> 
  <meta name="distribution" content="global" /> 
  <meta name="Generator" content="LaTeX2HTML v2002-2-1" /> 
  <meta http-equiv="Content-Style-Type" content="text/css" /> 
  <link rel="STYLESHEET" href="irbook.css" /> 
  <link rel="next" href="references-and-further-reading-20.html" /> 
  <link rel="previous" href="distributing-indexes-1.html" /> 
  <link rel="up" href="web-crawling-and-indexes-1.html" /> 
  <link rel="next" href="references-and-further-reading-20.html" /> 
 </head> 
 <body> 
  <!--Navigation Panel--> 
  <a name="tex2html4924" href="references-and-further-reading-20.html"> <img width="37" height="24" align="BOTTOM" border="0" alt="next" src="http://nlp.stanford.edu/IR-book/html/icons/next.png" /></a> 
  <a name="tex2html4918" href="web-crawling-and-indexes-1.html"> <img width="26" height="24" align="BOTTOM" border="0" alt="up" src="http://nlp.stanford.edu/IR-book/html/icons/up.png" /></a> 
  <a name="tex2html4912" href="distributing-indexes-1.html"> <img width="63" height="24" align="BOTTOM" border="0" alt="previous" src="http://nlp.stanford.edu/IR-book/html/icons/prev.png" /></a> 
  <a name="tex2html4920" href="contents-1.html"> <img width="65" height="24" align="BOTTOM" border="0" alt="contents" src="http://nlp.stanford.edu/IR-book/html/icons/contents.png" /></a> 
  <a name="tex2html4922" href="index-1.html"> <img width="43" height="24" align="BOTTOM" border="0" alt="index" src="http://nlp.stanford.edu/IR-book/html/icons/index.png" /></a> 
  <br /> 
  <b> Next:</b> 
  <a name="tex2html4925" href="references-and-further-reading-20.html">References and further reading</a> 
  <b> Up:</b> 
  <a name="tex2html4919" href="web-crawling-and-indexes-1.html">Web crawling and indexes</a> 
  <b> Previous:</b> 
  <a name="tex2html4913" href="distributing-indexes-1.html">Distributing indexes</a> &nbsp; 
  <b> <a name="tex2html4921" href="contents-1.html">Contents</a></b> &nbsp; 
  <b> <a name="tex2html4923" href="index-1.html">Index</a></b> 
  <br /> 
  <br /> 
  <!--End of Navigation Panel--> 
  <h1><a name="SECTION002540000000000000000"></a> <a name="sec:connect"></a> <a name="p:connect"></a> <br /> Connectivity servers </h1> For reasons to become clearer in Chapter 
  <a href="link-analysis-1.html#ch:link">21</a> , web search engines require a 
  <a name="31579"></a> 
  <i>connectivity server</i> that supports fast 
  <a name="31581"></a> 
  <i>connectivity queries</i> on the web graph. Typical connectivity queries are 
  <i>which URLs link to a given URL?</i> and 
  <i>which URLs does a given URL link to?</i> To this end, we wish to store mappings in memory from URL to out-links, and from URL to in-links. Applications include crawl control, web graph analysis, sophisticated crawl optimization and 
  <i>link analysis</i> (to be covered in Chapter 
  <a href="link-analysis-1.html#ch:link">21</a> ). 
  <p> Suppose that the Web had four billion pages, each with ten links to other pages. In the simplest form, we would require 32 bits or 4 bytes to specify each end (source and destination) of each link, requiring a total of <br /> </p>
  <div align="RIGHT"> 
   <!-- MATH
 \begin{equation}
4 \times 10^9\times 10 \times 8 = 3.2\times 10^{11}
\end{equation}
 --> 
   <table width="100%" align="CENTER"> 
    <tbody>
     <tr valign="MIDDLE">
      <td align="CENTER" nowrap=""><img width="203" height="25" border="0" src="img1887.png" alt="\begin{displaymath}
4 \times 10^9\times 10 \times 8 = 3.2\times 10^{11}
\end{displaymath}" /></td> 
      <td width="10" align="RIGHT"> (250)</td>
     </tr> 
    </tbody>
   </table> 
   <br clear="ALL" />
  </div>
  <p></p> bytes of memory. Some basic properties of the web graph can be exploited to use well under 10% of this memory requirement. At first sight, we appear to have a data compression problem - which is amenable to a variety of standard solutions. However, our goal is not to simply compress the web graph to fit into memory; we must do so in a way that efficiently supports connectivity queries; this challenge is reminiscent of index compression (Chapter 
  <a href="index-compression-1.html#ch:icompress">5</a> ). 
  <p> We assume that each web page is represented by a unique integer; the specific scheme used to assign these integers is described below. We build an <a name="31591"></a><i>adjacency table</i> that resembles an inverted index: it has a row for each web page, with the rows ordered by the corresponding integers. The row for any page <img width="13" height="32" align="MIDDLE" border="0" src="img181.png" alt="$p$" /> contains a sorted list of integers, each corresponding to a web page that links to <img width="13" height="32" align="MIDDLE" border="0" src="img181.png" alt="$p$" />. This table permits us to respond to queries of the form <i>which pages link to <img width="13" height="32" align="MIDDLE" border="0" src="img181.png" alt="$p$" />?</i> In similar fashion we build a table whose entries are the pages linked to by <img width="13" height="32" align="MIDDLE" border="0" src="img181.png" alt="$p$" />. </p>
  <p> This table representation cuts the space taken by the naive representation (in which we explicitly represent each link by its two end points, each a 32-bit integer) by 50%. Our description below will focus on the table for the links <i>from</i> each page; it should be clear that the techniques apply just as well to the table of links to each page. To further reduce the storage for the table, we exploit several ideas: </p>
  <ol> 
   <li>Similarity between lists: Many rows of the table have many entries in common. Thus, if we explicitly represent a prototype row for several similar rows, the remainder can be succinctly expressed in terms of the prototypical row. </li> 
   <li>Locality: many links from a page go to ``nearby'' pages - pages on the same host, for instance. This suggests that in encoding the destination of a link, we can often use small integers and thereby save space. </li> 
   <li>We use gap encodings in sorted lists: rather than store the destination of each link, we store the offset from the previous entry in the row. </li> 
  </ol> We now develop each of these techniques. 
  <p> In a <i>lexicographic</i> ordering of all URLs, we treat each URL as an alphanumeric string and sort these strings. Figure <a href="#fig:lexicoURL">20.5</a> shows a segment of this sorted order. For a true lexicographic sort of web pages, the domain name part of the URL should be inverted, so that <tt><a name="tex2html216" href="www.stanford.edu">www.stanford.edu</a></tt> becomes <tt><a name="tex2html217" href="edu.stanford.www">edu.stanford.www</a></tt>, but this is not necessary here since we are mainly concerned with links local to a single host. </p>
  <p> </p>
  <div align="CENTER">
   <a name="fig:lexicoURL"></a>
   <a name="p:lexicoURL"></a>
   <a name="31604"></a> 
   <table> 
    <caption align="BOTTOM">
     <strong>Figure 20.5:</strong> A lexicographically ordered set of URLs.
    </caption> 
    <tbody>
     <tr>
      <td><img width="408" height="110" border="0" src="img1888.png" alt="\begin{figure}\begin{verbatim}1: www.stanford.edu/alchemy
2: www.stanford.edu/...
...du/biology/plant/people
6: www.stanford.edu/chemistry\end{verbatim}
\end{figure}" /></td>
     </tr> 
    </tbody>
   </table> 
  </div> 
  <p> To each URL, we assign its position in this ordering as the unique identifying integer. Figure&nbsp;<a href="#fig:linktable">20.6</a> shows an example of such a numbering and the resulting table. In this example sequence, <tt>www.stanford.edu/biology</tt> is assigned the integer 2 since it is second in the sequence. </p>
  <p> We next exploit a property that stems from the way most websites are structured to get similarity and locality. Most websites have a template with a set of links from each page in the site to a fixed set of pages on the site (such as its copyright notice, terms of use, and so on). In this case, the rows corresponding to pages in a website will have many table entries in common. Moreover, under the lexicographic ordering of URLs, it is very likely that the pages from a website appear as contiguous rows in the table. </p>
  <p> </p>
  <div align="CENTER">
   <a name="fig:linktable"></a>
   <a name="31613"></a> 
   <table> 
    <caption align="BOTTOM">
     <strong>Figure 20.6:</strong> A four-row segment of the table of links.
    </caption> 
    <tbody>
     <tr>
      <td><img width="389" height="70" border="0" src="img1889.png" alt="\begin{figure}\begin{verbatim}1: 1, 2, 4, 8, 16, 32, 64
2: 1, 4, 9, 16, 25, 36...
...3, 21, 34, 55, 89, 144
4: 1, 4, 8, 16, 25, 36, 49, 64\end{verbatim}
\end{figure}" /></td>
     </tr> 
    </tbody>
   </table> 
  </div> 
  <p> We adopt the following strategy: we walk down the table, encoding each table row in terms of the seven preceding rows. In the example of Figure&nbsp;<a href="#fig:linktable">20.6</a>, we could encode the fourth row as ``the same as the row at offset 2 (meaning, two rows earlier in the table), with 9 replaced by 8''. This requires the specification of the offset, the integer(s) dropped (in this case 9) and the integer(s) added (in this case 8). The use of only the seven preceding rows has two advantages: (i) the offset can be expressed with only 3 bits; this choice is optimized empirically (the reason for seven and not eight preceding rows is the subject of Exercise&nbsp;<a href="#78">20.4</a>) and (ii) fixing the maximum offset to a small value like seven avoids having to perform an expensive search among many candidate prototypes in terms of which to express the current row. </p>
  <p> What if none of the preceding seven rows is a good prototype for expressing the current row? This would happen, for instance, at each boundary between different websites as we walk down the rows of the table. In this case we simply express the row as starting from the empty set and ``adding in'' each integer in that row. By using gap encodings to store the gaps (rather than the actual integers) in each row, and encoding these gaps tightly based on the distribution of their values, we obtain further space reduction. In experiments mentioned in Section <a href="references-and-further-reading-20.html#sec:crawlrefs">20.5</a> , the series of techniques outlined here appears to use as few as 3 bits per link, on average - a dramatic reduction from the 64 required in the naive representation. </p>
  <p> While these ideas give us a representation of sizable web graphs that comfortably fit in memory, we still need to support connectivity queries. What is entailed in retrieving from this representation the set of links from a page? First, we need an index lookup from (a hash of) the URL to its row number in the table. Next, we need to reconstruct these entries, which may be encoded in terms of entries in other rows. This entails following the offsets to reconstruct these other rows - a process that in principle could lead through many levels of indirection. In practice however, this does not happen very often. A heuristic for controlling this can be introduced into the construction of the table: when examining the preceding seven rows as candidates from which to model the current row, we demand a threshold of similarity between the current row and the candidate prototype. This threshold must be chosen with care. If the threshold is set too high, we seldom use prototypes and express many rows afresh. If the threshold is too low, most rows get expressed in terms of prototypes, so that at query time the reconstruction of a row leads to many levels of indirection through preceding prototypes. </p>
  <p> <b>Exercises.</b> </p>
  <ul> 
   <li><a name="78"></a>We noted that expressing a row in terms of one of seven preceding rows allowed us to use no more than three bits to specify which of the preceding rows we are using as prototype. Why seven and not eight preceding rows? <i>(Hint: consider the case when none of the preceding seven rows is a good prototype.)</i> <p> </p></li> 
   <li>We noted that for the scheme in Section <a href="#sec:connect">20.4</a> , decoding the links incident on a URL could result in many levels of indirection. Construct an example in which the number of levels of indirection grows linearly with the number of URLs. <p> </p></li> 
  </ul> 
  <p> </p>
  <hr /> 
  <!--Navigation Panel--> 
  <a name="tex2html4924" href="references-and-further-reading-20.html"> <img width="37" height="24" align="BOTTOM" border="0" alt="next" src="http://nlp.stanford.edu/IR-book/html/icons/next.png" /></a> 
  <a name="tex2html4918" href="web-crawling-and-indexes-1.html"> <img width="26" height="24" align="BOTTOM" border="0" alt="up" src="http://nlp.stanford.edu/IR-book/html/icons/up.png" /></a> 
  <a name="tex2html4912" href="distributing-indexes-1.html"> <img width="63" height="24" align="BOTTOM" border="0" alt="previous" src="http://nlp.stanford.edu/IR-book/html/icons/prev.png" /></a> 
  <a name="tex2html4920" href="contents-1.html"> <img width="65" height="24" align="BOTTOM" border="0" alt="contents" src="http://nlp.stanford.edu/IR-book/html/icons/contents.png" /></a> 
  <a name="tex2html4922" href="index-1.html"> <img width="43" height="24" align="BOTTOM" border="0" alt="index" src="http://nlp.stanford.edu/IR-book/html/icons/index.png" /></a> 
  <br /> 
  <b> Next:</b> 
  <a name="tex2html4925" href="references-and-further-reading-20.html">References and further reading</a> 
  <b> Up:</b> 
  <a name="tex2html4919" href="web-crawling-and-indexes-1.html">Web crawling and indexes</a> 
  <b> Previous:</b> 
  <a name="tex2html4913" href="distributing-indexes-1.html">Distributing indexes</a> &nbsp; 
  <b> <a name="tex2html4921" href="contents-1.html">Contents</a></b> &nbsp; 
  <b> <a name="tex2html4923" href="index-1.html">Index</a></b> 
  <!--End of Navigation Panel--> 
  <address> &copy; 2008 Cambridge University Press<br />This is an automatically generated page. In case of formatting errors you may want to look at the <a href="http://informationretrieval.org">PDF edition</a> of the book.<br /> 2009-04-07 </address>   
 </body>
</html>